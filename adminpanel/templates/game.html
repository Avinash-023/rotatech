{% extends 'base.html' %}

{% block content %}




       <style>

        .game-container {
            margin: 50px auto;
            max-width: 800px;
            padding: 30px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            animation: fadeIn 1s ease-in-out;
        }

        .word-container {
            font-size: 2em;
            margin: 20px 0;
            font-weight: bold;
            color: #3e64e7;
        }

        .hint {
            font-size: 1.2em;
            margin-top: 10px;
            color: #ff9800;
        }

        .input-container {
            margin: 20px;
        }

        .input-container input {
            font-size: 1.5em;
            padding: 10px;
            width: 200px;
            text-align: center;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 5px;
        }

        .input-container button {
            font-size: 1.2em;
            padding: 10px 20px;
            border: none;
            background-color: #4caf50;
            color: white;
            cursor: pointer;
            border-radius: 5px;
        }

        .input-container button:hover {
            background-color: #388e3c;



        }


        .feedback {
            font-size: 1.5em;
            margin-top: 20px;
        }

        .feedback.correct {
            color: #4caf50;
        }

        .feedback.incorrect {
            color: #f44336;
        }

        /* Fade-in animation */
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

    </style>

<body>
    <div class="game-container">
        <h1>Word Scramble Game</h1>
        <p>Unscramble the letters to form a word. You can use the hint if you need help!</p>
       


        <div class="word-container" id="scrambledWord"></div>
        <div class="hint" id="wordHint"></div>

        <div class="input-container">
            <input type="text" id="userInput" placeholder="Enter your guess" />
            <button onclick="checkAnswer()">Submit</button>
        </div>

        <div class="feedback" id="feedbackText"></div>   
       
    </div>

   

<script>
    // Pass the `posts` data from Django to JavaScript
    const wordsData = {{ posts | safe }};  // Directly use the passed posts as JSON

    const words = [];

    // Populate the words array using the data from Django
    for (let i = 0; i < wordsData.length; i++) {
        words.push({
            word: wordsData[i].name,   // Word name from the 'name' field of each post
            image: wordsData[i].image   // Image URL from the 'image' field of each post
        });
    }

    // Select a random word from the list
    let currentWord;

    function getRandomWord() {
        const randomIndex = Math.floor(Math.random() * words.length);
        currentWord = words[randomIndex];
        return currentWord;
    }

    function shuffleWord(word) {
        const shuffled = word.split('').sort(() => 0.5 - Math.random()).join('');
        return shuffled;
    }

    // Update the game with a new scrambled word
    function loadNewWord() {
        const wordObj = getRandomWord();
        const scrambled = shuffleWord(wordObj.word);
        
        document.getElementById('scrambledWord').textContent = scrambled;
        document.getElementById('wordHint').innerHTML = `Hint: <img src="${wordObj.image}" alt="Hint Image" style="max-width: 100px; height: auto;"/>`;
        
        document.getElementById('feedbackText').textContent = '';
        document.getElementById('userInput').value = '';
    }

    // Check the user's answer
    function checkAnswer() {
        const userInput = document.getElementById('userInput').value.toLowerCase();
        if (userInput === currentWord.word) {
            document.getElementById('feedbackText').textContent = 'Correct! Great job!';
            document.getElementById('feedbackText').className = 'feedback correct';
            speak("Congratulations!");
        } else {
            document.getElementById('feedbackText').textContent = 'Oops! Try again!';
            document.getElementById('feedbackText').className = 'feedback incorrect';
            speak("Try again!");
        }

        // Load a new word after a short delay
        setTimeout(loadNewWord, 1500);
    }

    // Speech feedback function
    function speak(text) {
        const speech = new SpeechSynthesisUtterance(text);
        speech.rate = 1;
        window.speechSynthesis.speak(speech);
    }

    // Initialize the game
    loadNewWord();
</script>




{%endblock%}